<!DOCTYPE html>
<html>
<head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych-comprehension-question.js"></script>
    <script src="jspsych-moving-window.js"></script>
    <link rel="stylesheet" href="jspsych/css/jspsych.css"></link>
</head>
<body></body>
<script>

    let timeline = [];

    // define trial information

    var trial1 = {
        item: 'item01',
        cond: 'cond1',
        sent: 'The dog chased the cat.',
        word: 'chased',
        menu1: ['the cat', 'the dog'],
        correct1: 'the dog',
        menu2: ['the cat', 'the dog'],
        correct2: 'the cat'
    };

    var trial2 = {
        item: 'item02',
        cond: 'cond1',
        sent: 'The cat ate the rat.',
        word: 'ate',
        menu1: ['the cat', 'the rat'],
        correct1: 'the cat',
        menu2: ['the cat', 'the rat'],
        correct2: 'the rat'
    };

    // make list of trials

    var trials = [trial1, trial2]

    // set parameters for moving-window trial

    var sentence = {
        type: 'moving-window',
        sent: jsPsych.timelineVariable('sent'),
        font_size: 17,
        data: {
            item: jsPsych.timelineVariable('item'),
            cond: jsPsych.timelineVariable('cond')
        }
    };

    // set parameters for comprehension question trial
    
    var question = {
        type: 'comprehension-question',
        prompt: 'What happened in the sentence?',
        word: jsPsych.timelineVariable('word'),
        menu1: jsPsych.timelineVariable('menu1'),
        correct1: jsPsych.timelineVariable('correct1'),
        menu2: jsPsych.timelineVariable('menu2'),
        correct2: jsPsych.timelineVariable('correct2'),
        data: {
            item: jsPsych.timelineVariable('item'),
            cond: jsPsych.timelineVariable('cond')
        }
    };

    // define procedure for task

    var procedure = {
        timeline: [sentence, question],
        timeline_variables: trials
    };
    timeline.push(procedure);

    // initiate experiment

    jsPsych.init({
        timeline: timeline,
        on_finish: function(){jsPsych.data.displayData();}
    });

</script>
</html>